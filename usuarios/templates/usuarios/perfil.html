{% extends 'base_usuarios.html' %}
{% load widget_tweaks %}

{% load static %}

{% block title %}Meu Perfil - ACHEIF{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-md p-8 flex flex-col md:flex-row gap-8">
    
    <!-- Foto de Perfil -->
    <div class="flex flex-col items-center md:w-1/3">
        {% if user.foto_perfil %}
            <img src="{{ user.foto_perfil.url }}" alt="Foto de Perfil" class="w-40 h-40 rounded-full object-cover shadow-md mb-4">
        {% else %}
            <div class="w-40 h-40 rounded-full bg-gray-200 flex items-center justify-center text-gray-400 text-xl font-bold mb-4">
                {{ user.username|slice:":1" }}
            </div>
        {% endif %}
        <h2 class="text-xl font-bold text-gray-700">{{ user.username }}</h2>
        <p class="text-gray-500">{{ user.email }}</p>
    </div>

    <!-- Formulário de Perfil -->
    <div class="md:w-2/3">
        <h3 class="text-lg font-semibold text-gray-700 mb-4">Editar Perfil</h3>
        <form method="post" enctype="multipart/form-data" class="flex flex-col gap-4">
            {% csrf_token %}
            {{ form.non_field_errors }}

            <!-- Nome de usuário -->
            <div>
                <label for="{{ form.username.id_for_label }}" class="form-label required-field">Nome de Usuário: </label>
                {{ form.username|add_class:"form-control" }}
                {{ form.username.errors }}
            </div>

            <!-- E-mail -->
            <div>
                <label for="{{ form.email.id_for_label }}" class="form-label required-field">E-mail: </label>
                {{ form.email|add_class:"form-control" }}
                {{ form.email.errors }}
            </div>

            <!-- Foto de perfil -->
            <div>
                <label for="{{ form.foto_perfil.id_for_label }}" class="form-label">Foto de Perfil: </label>
                {{ form.foto_perfil|add_class:"form-control" }}
                {{ form.foto_perfil.errors }}
            </div>

            <button type="submit" class="bg-emerald-800 text-white font-bold px-6 py-2 rounded-lg shadow-md hover:bg-emerald-700 transition mt-2">
                Salvar Alterações
            </button>
        </form>
    </div>
</div>
{% endblock %}
